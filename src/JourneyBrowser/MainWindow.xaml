<Window x:Class="WPFSample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="clr-namespace:Journey.Converters"
        xmlns:dragablz="http://dragablz.net/winfx/xaml/dragablz"
        mc:Ignorable="d"
        Title="MainWindow"
        Height="720"
        Width="1280"
        WindowStartupLocation="CenterScreen"
        Closing="Window_Closing"
        Loaded="Window_Loaded"
        Background="Transparent">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="35"
                      ResizeBorderThickness="{x:Static SystemParameters.WindowResizeBorderThickness}"
                      GlassFrameThickness="-1" />
        <!--UseAeroCaptionButtons="True"/>-->
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <converters:DoubleToGridLengthConverter x:Key="DoubleToGridLengthConverter"/>
    </Window.Resources>

    <!--<dragablz:TabablzControl Margin="0"
                             WindowChrome.IsHitTestVisibleInChrome="True"
                             ShowDefaultAddButton="True"
                             >
        <dragablz:TabablzControl.InterTabController>
            <dragablz:InterTabController />
        </dragablz:TabablzControl.InterTabController>
        <TabItem Header="Tab No. 1" IsSelected="True">
            <TextBlock>Hello World</TextBlock>
        </TabItem>
        <TabItem Header="Tab No. 2">
            <TextBlock>We Have Tearable Tabs!</TextBlock>
        </TabItem>
    </dragablz:TabablzControl>-->

    <DockPanel>

        <TabControl x:Name="BrowserTabs"
                    ItemsSource="{Binding Path= WebView2Tabs, Mode=OneWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                    SelectedIndex="{Binding Path= SelectedIndex, Mode=OneWayToSource, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                    IsSynchronizedWithCurrentItem="True"
                    WindowChrome.IsHitTestVisibleInChrome="True">

            <TabControl.Template>
                <ControlTemplate TargetType="TabControl">
                    <Grid>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <DockPanel Grid.Row="0"
                                   Grid.Column="0"
                                   Margin="0,0,100,0">

                            <!--Add New Tab Button-->
                            <Button DockPanel.Dock="Left"
                                    Content="+"
                                    Width="30"
                                    Height="30" 
                                    VerticalAlignment="Center"
                                    Click="Button_Click" />

                            <!--Tab Headers-->
                            <ScrollViewer DockPanel.Dock="Left"
                                      HorizontalScrollBarVisibility="Disabled"
                                      VerticalScrollBarVisibility="Disabled">

                                <TabPanel x:Name="HeaderPanel"
                                          Background="Transparent"
                                          Margin="12,7,150,0"
                                          IsItemsHost="True" />

                            </ScrollViewer>

                        </DockPanel>

                        <ContentPresenter Grid.Row="2" x:Name="ContentPanel"
                                              Margin="1,0,1,1"
                                              ContentSource="SelectedContent" />

                        <!--Content-->
                        <Grid Grid.Row="1">

                            <Border x:Name="ButtonBar"
                                    BorderBrush="LightGray"
                                    BorderThickness="0,0,0,1">

                                <Grid Background="White">

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="10"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="10"/>
                                    </Grid.ColumnDefinitions>

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="10"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="10"/>
                                    </Grid.RowDefinitions>

                                    <TextBox Name="addressBar"
                                             HorizontalAlignment="Center"
                                             Grid.Column="2"
                                             Grid.Row="1"
                                             MinWidth="250"
                                             Width="500"/>

                                    <Button x:Name="Journey"
                                            Click="ButtonJourney_Click"
                                            Grid.Column="3"
                                            Grid.Row="1"
                                            Content="Journey"
                                            HorizontalAlignment="Right"
                                            Width="40"/>

                                </Grid>

                            </Border>

                        </Grid>
                    </Grid>
                </ControlTemplate>
            </TabControl.Template>

            <TabControl.Resources>
                <Style TargetType="TabItem">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="TabItem">

                                <Border Name="TabBorder"
                                        BorderThickness="0"
                                        CornerRadius="6,6,0,0"
                                        Margin="0"
                                        Height="31"
                                        Width="150">

                                    <ContentPresenter x:Name="ContentSite"
                                                      VerticalAlignment="Center"
                                                      HorizontalAlignment="Left"
                                                      ContentSource="Header"
                                                      Margin="10,2"/>
                                </Border>

                                <ControlTemplate.Triggers>

                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="TabBorder" Property="Background" Value="White" />
                                    </Trigger>

                                    <Trigger Property="IsSelected" Value="False">
                                        <Setter TargetName="TabBorder" Property="Background" Value="Transparent" />
                                    </Trigger>

                                </ControlTemplate.Triggers>

                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TabControl.Resources>

        </TabControl>

    </DockPanel>

</Window>